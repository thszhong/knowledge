# 限流的场景
- 突发流量冲击
- 非法流量攻击
- 分业务控制
- 削峰填谷
- 降级

# 限流的常见算法对比
| 算法策略  |  概述 | 优势  |  劣势 | 软件 |
|---|---|---|---|---|
| 简单计数法Aomic  | 单位时间窗口内进行原子计数判断，基于乐观锁和CAS  | 简单   | 无法应对更小粒度时间的流量波，着重并发量  | |
| 简单计数法Semaphore  | 类似与令牌桶，基于AQS  | 简单   | 无法应对更小粒度时间的流量波动，着重并发量   | |
| 滑动窗口法  | 将单位时间划分为更小时间单位，通过更细粒度控制优化突发流量问题  |   |  需要遍历多个时间窗口O(N) | sentinel |
|  令牌桶法 | 固定速度生产令牌，然后消费令牌  |   |   | guava| 
|  漏斗桶法 | nginx的策略，通过队列实现  | 可以实现均衡的流量控制  |  需要有1个中心化的队列 | nginx |


# 限流的常见软件
|  软件 | 概述  | 优势  | 劣势  |
|---|---|---|---|
|  sentinel | 阿里出品  | 支持单机、集群  | 功能多上手成本、运维成本  |
|  hytrix |  facebook出品 |   |  已经暂停维护 |
| guava | 谷歌出品 | | 不支持集群 |
| redis | | | |
| Nginx或tomcat自带 | | | |

## sentinel的关键实现
- 责任链模式，每个规则都是1个slot：流控规则，降级规则，热点规则，系统规则和认证授权规则
- 
